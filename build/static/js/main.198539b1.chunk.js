(this["webpackJsonpwheres-waldo"]=this["webpackJsonpwheres-waldo"]||[]).push([[0],{10:function(e,t,a){e.exports=a(20)},15:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),c=a(9),s=a.n(c),o=(a(15),a(21));var r=()=>l.a.createElement("div",{className:"header"},l.a.createElement("img",{src:"/waldo.png",style:{width:"100px"},alt:"waldo"}),"Where's Waldo HubSpot App");var u=()=>{const[e,t]=Object(n.useState)([]);Object(n.useEffect)(()=>{a()},[]);const a=async()=>{try{const{data:e}=await o.a.get("/api/contacts");t(e)}catch(e){console.log(e)}};return l.a.createElement("div",null,l.a.createElement("h2",null,"Contacts from connected account:"),e.map((e,t)=>l.a.createElement("div",null,e.properties.firstname.value)))};var i=e=>{let{onLogin:t}=e;const[a,c]=Object(n.useState)(""),[s,r]=Object(n.useState)(""),[u,i]=Object(n.useState)("");return l.a.createElement("div",null,"Username:",l.a.createElement("input",{type:"input",value:a,onChange:e=>c(e.target.value)}),"Password:",l.a.createElement("input",{type:"password",value:s,onChange:e=>r(e.target.value)}),l.a.createElement("input",{type:"button",value:"sign up",disabled:!a||!s,onClick:async()=>{try{await o.a.post("/api/sign-up",{username:a,password:s}),i("Successfully signed up. Please log in")}catch(e){console.log(e),i("Sign up failed. Please try again with a different username")}}}),l.a.createElement("input",{type:"button",value:"login",disabled:!a||!s,onClick:async()=>{try{const{data:e}=await o.a.get("/api/login",{params:{username:a,password:s}});t(e)}catch(e){console.log(e),i("Login failed. Please try again")}}}),l.a.createElement("div",null,u))};var d=()=>{const[e,t]=Object(n.useState)(null),[a,c]=Object(n.useState)(null),[s,d]=Object(n.useState)(!0);Object(n.useEffect)(()=>{a&&p()},[a]);const p=async()=>{d(!0);try{const{data:e}=await o.a.get("/oauth/install-status",{params:{userId:a.id}});t(e)}catch(e){console.log(e)}d(!1)};return l.a.createElement("div",{className:"app"},l.a.createElement(r,null),l.a.createElement("div",{className:"content"},a?s?l.a.createElement("div",null,"Loading Access Token For Session..."):e?l.a.createElement("div",null,l.a.createElement("div",null,"You have installed the HubSpot app!")," ",l.a.createElement("div",null,"Access Token:"),l.a.createElement("div",{style:{fontSize:"7px"}},e),l.a.createElement(u,null)):l.a.createElement("div",null,l.a.createElement("div",null,"You need to install the HubSpot App"," ",l.a.createElement("a",{href:"oauth/install?userId=".concat(a.id)},"(Install)")),l.a.createElement("input",{type:"button",onClick:p,value:"Retry fetch"})):l.a.createElement(i,{onLogin:e=>c(e)})))};s.a.render(l.a.createElement(d,null),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.198539b1.chunk.js.map